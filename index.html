<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="main.css">
  <link rel="icon" href="flowers.png" type="image/x-icon">
  <link href='https://fonts.googleapis.com/css?family=Gorditas' rel='stylesheet'>
  <title>flowers</title>
</head>

<body class="container">
  <div class="night"></div>
  <div class="text">
    <h1 style="color: white">
      <span>i</span> <span style="color: rgb(255, 4, 92)">love</span>
      <span>you MJ</span>
    </h1>
  </div>
  <div class="flowers">
    <div class="flower flower--1">
      <div class="flower__leafs flower__leafs--1">
        <div class="flower__leaf flower__leaf--1"></div>
        <div class="flower__leaf flower__leaf--2"></div>
        <div class="flower__leaf flower__leaf--3"></div>
        <div class="flower__leaf flower__leaf--4"></div>
        <div class="flower__white-circle"></div>

        <div class="flower__light flower__light--1"></div>
        <div class="flower__light flower__light--2"></div>
        <div class="flower__light flower__light--3"></div>
        <div class="flower__light flower__light--4"></div>
        <div class="flower__light flower__light--5"></div>
        <div class="flower__light flower__light--6"></div>
        <div class="flower__light flower__light--7"></div>
        <div class="flower__light flower__light--8"></div>

      </div>
      <div class="flower__line">
        <div class="flower__line__leaf flower__line__leaf--1"></div>
        <div class="flower__line__leaf flower__line__leaf--2"></div>
        <div class="flower__line__leaf flower__line__leaf--3"></div>
        <div class="flower__line__leaf flower__line__leaf--4"></div>
        <div class="flower__line__leaf flower__line__leaf--5"></div>
        <div class="flower__line__leaf flower__line__leaf--6"></div>
      </div>
    </div>

    <div class="flower flower--2">
      <div class="flower__leafs flower__leafs--2">
        <div class="flower__leaf flower__leaf--1"></div>
        <div class="flower__leaf flower__leaf--2"></div>
        <div class="flower__leaf flower__leaf--3"></div>
        <div class="flower__leaf flower__leaf--4"></div>
        <div class="flower__white-circle"></div>

        <div class="flower__light flower__light--1"></div>
        <div class="flower__light flower__light--2"></div>
        <div class="flower__light flower__light--3"></div>
        <div class="flower__light flower__light--4"></div>
        <div class="flower__light flower__light--5"></div>
        <div class="flower__light flower__light--6"></div>
        <div class="flower__light flower__light--7"></div>
        <div class="flower__light flower__light--8"></div>

      </div>
      <div class="flower__line">
        <div class="flower__line__leaf flower__line__leaf--1"></div>
        <div class="flower__line__leaf flower__line__leaf--2"></div>
        <div class="flower__line__leaf flower__line__leaf--3"></div>
        <div class="flower__line__leaf flower__line__leaf--4"></div>
      </div>
    </div>

    <div class="flower flower--3">
      <div class="flower__leafs flower__leafs--3">
        <div class="flower__leaf flower__leaf--1"></div>
        <div class="flower__leaf flower__leaf--2"></div>
        <div class="flower__leaf flower__leaf--3"></div>
        <div class="flower__leaf flower__leaf--4"></div>
        <div class="flower__white-circle"></div>

        <div class="flower__light flower__light--1"></div>
        <div class="flower__light flower__light--2"></div>
        <div class="flower__light flower__light--3"></div>
        <div class="flower__light flower__light--4"></div>
        <div class="flower__light flower__light--5"></div>
        <div class="flower__light flower__light--6"></div>
        <div class="flower__light flower__light--7"></div>
        <div class="flower__light flower__light--8"></div>

      </div>
      <div class="flower__line">
        <div class="flower__line__leaf flower__line__leaf--1"></div>
        <div class="flower__line__leaf flower__line__leaf--2"></div>
        <div class="flower__line__leaf flower__line__leaf--3"></div>
        <div class="flower__line__leaf flower__line__leaf--4"></div>
      </div>
    </div>

    <div class="grow-ans" style="--d:1.2s">
      <div class="flower__g-long">
        <div class="flower__g-long__top"></div>
        <div class="flower__g-long__bottom"></div>
      </div>
    </div>

    <div class="growing-grass">
      <div class="flower__grass flower__grass--1">
        <div class="flower__grass--top"></div>
        <div class="flower__grass--bottom"></div>
        <div class="flower__grass__leaf flower__grass__leaf--1"></div>
        <div class="flower__grass__leaf flower__grass__leaf--2"></div>
        <div class="flower__grass__leaf flower__grass__leaf--3"></div>
        <div class="flower__grass__leaf flower__grass__leaf--4"></div>
        <div class="flower__grass__leaf flower__grass__leaf--5"></div>
        <div class="flower__grass__leaf flower__grass__leaf--6"></div>
        <div class="flower__grass__leaf flower__grass__leaf--7"></div>
        <div class="flower__grass__leaf flower__grass__leaf--8"></div>
        <div class="flower__grass__overlay"></div>
      </div>
    </div>

    <div class="growing-grass">
      <div class="flower__grass flower__grass--2">
        <div class="flower__grass--top"></div>
        <div class="flower__grass--bottom"></div>
        <div class="flower__grass__leaf flower__grass__leaf--1"></div>
        <div class="flower__grass__leaf flower__grass__leaf--2"></div>
        <div class="flower__grass__leaf flower__grass__leaf--3"></div>
        <div class="flower__grass__leaf flower__grass__leaf--4"></div>
        <div class="flower__grass__leaf flower__grass__leaf--5"></div>
        <div class="flower__grass__leaf flower__grass__leaf--6"></div>
        <div class="flower__grass__leaf flower__grass__leaf--7"></div>
        <div class="flower__grass__leaf flower__grass__leaf--8"></div>
        <div class="flower__grass__overlay"></div>
      </div>
    </div>

    <div class="grow-ans" style="--d:2.4s">
      <div class="flower__g-right flower__g-right--1">
        <div class="leaf"></div>
      </div>
    </div>

    <div class="grow-ans" style="--d:2.8s">
      <div class="flower__g-right flower__g-right--2">
        <div class="leaf"></div>
      </div>
    </div>

    <div class="grow-ans" style="--d:2.8s">
      <div class="flower__g-front">
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--1">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--2">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--3">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--4">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--5">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--6">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--7">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--8">
          <div class="flower__g-front__leaf"></div>
        </div>
        <div class="flower__g-front__line"></div>
      </div>
    </div>

    <div class="grow-ans" style="--d:3.2s">
      <div class="flower__g-fr">
        <div class="leaf"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--1"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--2"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--3"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--4"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--5"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--6"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--7"></div>
        <div class="flower__g-fr__leaf flower__g-fr__leaf--8"></div>
      </div>
    </div>

    <div class="long-g long-g--0">
      <div class="grow-ans" style="--d:3s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:2.2s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:3.4s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:3.6s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--1">
      <div class="grow-ans" style="--d:3.6s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:3.8s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:4s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:4.2s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--2">
      <div class="grow-ans" style="--d:4s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:4.2s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:4.4s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:4.6s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--3">
      <div class="grow-ans" style="--d:4s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:4.2s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:3s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:3.6s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--4">
      <div class="grow-ans" style="--d:4s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:4.2s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:3s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:3.6s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--5">
      <div class="grow-ans" style="--d:4s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:4.2s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:3s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:3.6s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--6">
      <div class="grow-ans" style="--d:4.2s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:4.4s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:4.6s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:4.8s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>

    <div class="long-g long-g--7">
      <div class="grow-ans" style="--d:3s">
        <div class="leaf leaf--0"></div>
      </div>
      <div class="grow-ans" style="--d:3.2s">
        <div class="leaf leaf--1"></div>
      </div>
      <div class="grow-ans" style="--d:3.5s">
        <div class="leaf leaf--2"></div>
      </div>
      <div class="grow-ans" style="--d:3.6s">
        <div class="leaf leaf--3"></div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
  <script>class TextDesintegrator {
      constructor(el, options) {
        const defaultOptions = {
          padding: 160,
          density: 4,
          duration: 2500 // in ms
        };
        this.step = 0;
        this.count = 0;
        this.data = [];
        this.scale = 2; // pixel density
        this.el = el;
        this.el.style.position = "relative";
        this.el.innerHTML = `<span class="td-wrapper">${this.el.textContent}</span>`;
        this.inner = this.el.querySelector("span");
        this.options = { ...defaultOptions, ...options };
        this.reverse = false;
        // copy el to canvas

        document.fonts.ready.then(() => {
          this.createCanvas();
          this.fillCanvas();
          this.pixelize();
          setTimeout(() => {
            this.start();
          }, 0);
        });
      }
      createCanvas() {
        // get the width and the height of the span element
        // canvas will have the same dimensions
        const { width, height } = this.el.getBoundingClientRect();
        this.height = height;
        this.width = width;
        this.canvas = document.createElement("canvas");
        this.canvas.width = this.scale * (this.width + 2 * this.options.padding);
        this.canvas.height = this.scale * (this.height + 2 * this.options.padding);
        this.canvas.style.width = `${this.width + 2 * this.options.padding}px`;
        this.canvas.style.height = `${this.height + 2 * this.options.padding}px`;
        this.canvas.style.transform = `translate3d(${-this.options
          .padding}px, ${-this.options.padding}px, 0)`;
        this.context = this.canvas.getContext("2d");
        this.context.scale(this.scale, this.scale);
        this.el.append(this.canvas);
      }
      clearContext() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
      }
      fillCanvas() {
        const style = getComputedStyle(this.el);
        this.color = style.getPropertyValue("color");
        this.context.fillStyle = this.color;
        this.context.font = style.getPropertyValue("font");
        this.context.textBaseline = "ideographic";
        this.context.fillText(
          this.el.textContent,
          this.options.padding,
          (this.canvas.height / this.scale + this.height) / 2
        );
      }
      start() {
        this.t0 = 0;
        this.id = window.requestAnimationFrame((t) => this.render(t));
      }
      stop() {
        if (this.id) {
          window.cancelAnimationFrame(this.id);
        }
      }
      pixelize() {
        const { padding, density, duration } = this.options;
        for (
          let y = 0;
          y < this.canvas.height + 2 * padding - Math.floor(density / 2);
          y += density
        ) {
          for (
            let x = 0;
            x < this.canvas.width + 2 * padding - Math.floor(density / 2);
            x += density
          ) {
            const { data } = this.context.getImageData(
              x + Math.floor(density / 4),
              y + Math.floor(density / 4),
              1,
              1
            );
            const [, , , a] = data;
            if (a > 0) {
              this.data.push({
                alpha: a / 255,
                longevity: Math.min(
                  duration * 0.25 + Math.random() * duration * 0.75,
                  duration - 1
                ),
                x,
                y,
                initialX: x,
                initialY: y,
                finalX: x + 2 * (Math.random() - 0.5) * this.canvas.width,
                finalY: y + 2 * (Math.random() - 0.5) * this.canvas.width
              });
            }
          }
        }
      }

      render(timestamp) {
        if (!this.t0) {
          this.t0 = timestamp;
        }
        const elapsed = timestamp - this.t0;
        if (this.step < Math.min(500, this.options.duration * 0.5)) {
          if (this.reverse) {
            this.inner.classList.remove("td-hide");
          } else {
            this.inner.classList.add("td-hide");
          }
        }
        this.updateData();
        this.clearContext();
        for (const sq of this.data) {
          this.context.globalAlpha = sq.alpha;
          this.context.fillStyle = this.color;
          this.context.fillRect(
            sq.x / 2,
            sq.y / 2,
            this.options.density / 2,
            this.options.density / 2
          );
        }
        this.step = this.reverse ? this.options.duration - elapsed : elapsed;
        if (elapsed > this.options.duration) {
          this.onComplete();
        }
        this.id = requestAnimationFrame((t) => this.render(t));
      }
      onComplete() {
        this.reverse = !this.reverse;
        this.t0 = 0;
      }
      updateData() {
        for (const sq of this.data) {
          sq.alpha = this.calculateOpacity(sq.longevity, this.step);
          sq.x = this.calculatePosition(
            sq.initialX,
            sq.finalX,
            sq.longevity,
            this.step
          );
          sq.y = this.calculatePosition(
            sq.initialY,
            sq.finalY,
            sq.longevity,
            this.step
          );
        }
      }
      calculatePosition(xS, xE, l, x) {
        const expo = (l, x) => {
          return x < l ? 1 - Math.pow(2, 10 * (x / l) - 10) : 0;
        };
        const val = (xS - xE) * expo(l, x) + xE;
        return val;
      }
      calculateOpacity(l, x) {
        return x <= l ? 1 - Math.pow(x / l, 1) : 0;
      }
    }

    const h1 = document.querySelectorAll("h1 span");

    h1.forEach((el) => new TextDesintegrator(el));</script>
</body>

</html>